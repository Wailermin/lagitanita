<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="docTitle">Men√∫</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --teal: #2abfbf;
    --teal-dark: #1a9a9a;
    --wine: #6b1a2e;
    --wine-light: #8b2440;
    --cream: #fdf9f4;
    --dark: #1a1a1a;
    --gold: #c9a84c;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Lato', sans-serif; background: var(--cream); color: var(--dark); overflow-x: hidden; }
  .hero {
    background: var(--wine);
    min-height: 100vh;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    text-align: center; position: relative; overflow: hidden; padding: 40px 20px;
  }
  .hero::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(ellipse at 50% 0%, rgba(42,191,191,0.18) 0%, transparent 70%),
                radial-gradient(ellipse at 80% 100%, rgba(42,191,191,0.10) 0%, transparent 60%);
  }
  .hero-pattern { position: absolute; inset: 0;
    background-image: repeating-linear-gradient(45deg, transparent, transparent 40px, rgba(255,255,255,0.02) 40px, rgba(255,255,255,0.02) 80px);
  }
  .hero-content { position: relative; z-index: 2; }
  .logo-circle {
    width: 130px; height: 130px; border-radius: 50%;
    background: white; display:flex; align-items:center; justify-content:center;
    margin: 0 auto 30px;
    box-shadow: 0 0 0 4px var(--teal), 0 0 0 10px rgba(42,191,191,0.2), 0 20px 60px rgba(0,0,0,0.4);
    animation: float 3s ease-in-out infinite; overflow: hidden;
  }
  .logo-circle img { width:100%; height:100%; object-fit:cover; }
  .logo-placeholder { font-family:'Cinzel', serif; font-size:13px; color: var(--wine); text-align:center; line-height:1.3; padding:10px; font-weight:700; }
  @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
  .hero h1 { font-family:'Cinzel', serif; font-size: clamp(3rem, 10vw, 7rem); color:white; line-height:0.9; letter-spacing:2px; text-shadow: 0 4px 30px rgba(0,0,0,0.3); animation: fadeUp .8s ease both; }
  .hero h1 span { color: var(--teal); display:block; }
  .hero-sub { font-size:.85rem; letter-spacing:5px; color: rgba(255,255,255,.6); text-transform: uppercase; margin-top: 12px; animation: fadeUp .8s .2s ease both; }
  .hero-divider { width: 80px; height: 2px; background: var(--teal); margin: 24px auto; animation: expandWidth 1s .4s ease both; }
  @keyframes expandWidth{from{width:0; opacity:0}to{width:80px;opacity:1}}
  .hero-tagline { font-size: 1rem; color: rgba(255,255,255,.75); letter-spacing:2px; animation: fadeUp .8s .5s ease both; }
  .nav-tabs { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top: 40px; animation: fadeUp .8s .7s ease both; }
  .nav-tab{ padding: 10px 22px; border: 1.5px solid rgba(42,191,191,.5); color: var(--teal); text-decoration:none; font-size:.78rem; letter-spacing:3px; text-transform:uppercase; border-radius:30px; transition: all .3s; backdrop-filter: blur(4px);}
  .nav-tab:hover{ background: var(--teal); color:white; border-color: var(--teal); box-shadow: 0 0 20px rgba(42,191,191,.4); }
  @keyframes fadeUp{from{opacity:0; transform: translateY(20px)}to{opacity:1; transform:none}}
  .section { padding: 80px 20px; max-width: 1000px; margin: 0 auto; }
  .section-header { text-align:center; margin-bottom: 50px; }
  .section-label{ font-size:.7rem; letter-spacing:5px; text-transform: uppercase; color: var(--teal); font-weight:700; margin-bottom: 10px; }
  .section-title{ font-family:'Playfair Display', serif; font-size: clamp(2rem, 5vw, 3.5rem); color: var(--wine); font-weight: 900; line-height:1; }
  .section-title span{ color: var(--teal); }
  .section-divider{ display:flex; align-items:center; gap:12px; margin: 16px auto 0; width: fit-content; }
  .section-divider::before, .section-divider::after{ content:''; width:40px; height:1px; background: var(--teal); }
  .section-divider span{ font-size: 1.2rem; color: var(--teal); }

  .breakfast-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:20px; }
  .breakfast-card{ background:white; border-radius:16px; padding: 30px 24px; text-align:center; position: relative; overflow:hidden;
    box-shadow: 0 4px 20px rgba(107,26,46,.08); transition: transform .3s, box-shadow .3s; border: 1px solid rgba(42,191,191,.15); }
  .breakfast-card::before{ content:''; position:absolute; top:0; left:0; right:0; height:4px; background: linear-gradient(90deg, var(--teal), var(--wine));}
  .breakfast-card:hover{ transform: translateY(-6px); box-shadow: 0 16px 40px rgba(107,26,46,.15); }
  .breakfast-card h3{ font-family:'Playfair Display', serif; font-size: 1.05rem; color: var(--wine); font-weight:700; line-height:1.3; margin-bottom: 10px; }
  .breakfast-card .includes{ font-size:.78rem; color:#888; letter-spacing:1px; margin-bottom: 16px; }
  .price-tag{ display:inline-block; background: var(--wine); color:white; font-family:'Cinzel', serif; font-size:1.1rem; font-weight:700; padding: 6px 18px; border-radius:20px; }

  .category-block{ margin-bottom: 50px; }
  .category-label{ display:inline-flex; align-items:center; gap:8px; font-family:'Cinzel', serif; font-size:.9rem; font-weight:700; color: var(--teal);
    letter-spacing:2px; text-transform: uppercase; margin-bottom: 16px; padding-bottom: 8px; border-bottom: 2px solid var(--teal); }
  .menu-items{ display:grid; gap:2px; }
  .menu-item{
  display:flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 30px 34px; /* üëà margen lateral */
  border-bottom: 1px dashed rgba(0,0,0,.08);
  gap:12px;
  transition: background .2s;
}
  .menu-item:last-child{ border-bottom:none; }
  .menu-item:hover{ background: rgba(42,191,191,.04); }
  .item-name{ font-size:.92rem; color: var(--dark); font-weight:400; }
  .item-sub{ font-size:.78rem; color:#999; display:block; }
  .item-price{ font-family:'Cinzel', serif; font-size:.9rem; font-weight:700; color: var(--wine); white-space:nowrap; }

  .mains-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:20px; }
  .main-card{ background:white; border-radius:16px; padding: 28px 24px; box-shadow: 0 4px 20px rgba(107,26,46,.08);
    transition: transform .3s, box-shadow .3s; border: 1px solid rgba(42,191,191,.1); position:relative; overflow:hidden; }
  .main-card::after{ content:''; position:absolute; bottom:0; left:0; right:0; height:3px; background: linear-gradient(90deg, var(--wine), var(--teal)); }
  .main-card:hover{ transform: translateY(-5px); box-shadow: 0 14px 35px rgba(107,26,46,.15); }
  .main-card h3{ font-family:'Playfair Display', serif; font-size:1.2rem; color: var(--wine); font-weight:700; margin-bottom: 8px; }
  .main-card .sides{ font-size:.78rem; color:#999; margin-bottom: 14px; line-height:1.6; }
  .main-card .price-tag{ background: linear-gradient(135deg, var(--wine), var(--wine-light)); }

  .drinks-section{ background: var(--wine); padding: 80px 20px; position: relative; overflow:hidden; }
  .drinks-section::before{ content:''; position:absolute; inset:0;
    background: radial-gradient(ellipse at 20% 50%, rgba(42,191,191,.15) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 20%, rgba(42,191,191,.1) 0%, transparent 50%); }
  .drinks-inner{ max-width: 1000px; margin:0 auto; position: relative; z-index:1; }
  .drinks-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:24px; margin-top: 40px; }
  .drinks-col{ background: rgba(255,255,255,.05); border: 1px solid rgba(42,191,191,.2); border-radius:16px; padding: 24px 20px; backdrop-filter: blur(4px); }
  .drinks-col-title{ font-family:'Cinzel', serif; font-size:.8rem; font-weight:700; color: var(--teal); letter-spacing:3px; text-transform:uppercase;
    margin-bottom: 16px; padding-bottom: 10px; border-bottom: 1px solid rgba(42,191,191,.3); }
  .drink-item{ display:flex; justify-content: space-between; align-items: baseline; padding: 7px 0; border-bottom: 1px dashed rgba(255,255,255,.06); gap:10px; }
  .drink-item:last-child{ border-bottom:none; }
  .drink-name{ font-size:.85rem; color: rgba(255,255,255,.85); }
  .drink-price{ font-family:'Cinzel', serif; font-size:.82rem; font-weight:700; color: var(--teal); white-space: nowrap; }

  .footer{ background:#111; text-align:center; padding: 40px 20px; color: rgba(255,255,255,.4); font-size:.8rem; letter-spacing:2px; }
  .footer span{ color: var(--teal); }
  .tax-badge{ display:inline-block; background: rgba(42,191,191,.1); border: 1px solid var(--teal); color: var(--teal);
    font-size:.7rem; letter-spacing:3px; text-transform:uppercase; padding: 6px 16px; border-radius:20px; margin-top: 20px; }
  .bg-alt{ background:#f4efe8; }
  @media (max-width:600px){ .breakfast-grid{ grid-template-columns: 1fr 1fr; } .mains-grid{ grid-template-columns: 1fr; } .drinks-grid{ grid-template-columns: 1fr 1fr; } }
  @media (max-width:420px){ .breakfast-grid{ grid-template-columns: 1fr; } .drinks-grid{ grid-template-columns: 1fr; } }
  .reveal{ opacity:0; transform: translateY(30px); transition: opacity .6s ease, transform .6s ease; }
  .reveal.visible{ opacity:1; transform:none; }

  /* ===== Image Modal ===== */
.img-modal{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,.72);
  z-index: 9999;
}
.img-modal.open{ display:flex; }

.img-modal img{
  max-width: min(92vw, 820px);
  max-height: 86vh;
  border-radius: 16px;
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
  cursor: pointer; /* tocar para cerrar */
  object-fit: contain;
}

.img-modal .hint{
  position: absolute;
  bottom: 14px;
  left: 50%;
  transform: translateX(-50%);
  color: rgba(255,255,255,.75);
  font-size: 12px;
  letter-spacing: 1px;
}
</style>
</head>
<body>

  <!-- Modal para ver im√°genes -->
<div class="img-modal" id="imgModal" aria-hidden="true">
  <img id="imgModalPic" alt="Imagen del plato">
  <div class="hint">Toca la imagen para cerrar</div>
</div>

<section class="hero">
  <div class="hero-pattern"></div>
  <div class="hero-content">
    <div class="logo-circle" id="logoCircle">
      <img src="/assets/logo.png" alt="Logo">
    </div>
    <h1 id="heroTitle">La <span>Gitana</span></h1>
    <p class="hero-sub" id="heroSubtitle">Food &amp; Drinks</p>
    <div class="hero-divider"></div>
    <p class="hero-tagline" id="heroTagline">Sabor que enamora ¬∑ RD</p>

    <nav class="nav-tabs" id="heroTabs"></nav>
  </div>
</section>

<section id="desayuno">
  <div class="section">
    <div class="section-header reveal">
      <p class="section-label" id="breakfastLabel"></p>
      <h2 class="section-title" id="breakfastTitle"></h2>
      <div class="section-divider"><span>‚òÄ</span></div>
      <div class="tax-badge" id="breakfastBadge"></div>
    </div>
    <div class="breakfast-grid reveal" id="breakfastGrid"></div>
  </div>
</section>

<section id="entradas" class="bg-alt">
  <div class="section">
    <div class="section-header reveal">
      <p class="section-label" id="appsLabel"></p>
      <h2 class="section-title"><span id="appsTitle"></span></h2>
      <div class="section-divider"><span>üçΩ</span></div>
    </div>
    <div class="reveal" id="appsCats"></div>
  </div>
</section>

<section id="platos">
  <div class="section">
    <div class="section-header reveal">
      <p class="section-label" id="mainsLabel"></p>
      <h2 class="section-title" id="mainsTitle"></h2>
      <div class="section-divider"><span>üî•</span></div>
    </div>
    <div class="mains-grid reveal" id="mainsGrid"></div>
    <div style="text-align:center; margin-top: 30px;">
      <div class="tax-badge reveal" id="mainsBadge"></div>
    </div>
  </div>
</section>

<section id="bebidas" class="drinks-section">
  <div class="drinks-inner">
    <div class="section-header reveal">
      <p class="section-label" style="color: rgba(255,255,255,0.5)" id="drinksLabel"></p>
      <h2 class="section-title" style="color: white;" id="drinksTitle"></h2>
      <div class="section-divider"><span style="color:var(--teal)">üçπ</span></div>
    </div>

    <div class="drinks-grid reveal" id="drinksGrid"></div>

    <div style="text-align:center; margin-top:30px;">
      <div class="tax-badge reveal" id="drinksBadge" style="border-color: rgba(42,191,191,0.4); color: rgba(255,255,255,0.5);"></div>
    </div>
  </div>
</section>

<footer class="footer">
  <p><span id="footName">La Gitana</span> <span style="color: rgba(255,255,255,0.4); font-family: inherit;">Food &amp; Drinks</span></p>
  <p style="margin-top: 8px;" id="footCopy"></p>
</footer>

<script>

  // ===== Modal helpers =====
const imgModal = document.getElementById('imgModal');
const imgModalPic = document.getElementById('imgModalPic');

function openImg(src){
  if(!src) return;
  imgModalPic.src = src;
  imgModal.classList.add('open');
  imgModal.setAttribute('aria-hidden', 'false');
}

function closeImg(){
  imgModal.classList.remove('open');
  imgModal.setAttribute('aria-hidden', 'true');
  imgModalPic.removeAttribute('src');
}

// Cerrar tocando la imagen
imgModalPic.addEventListener('click', closeImg);

// Cerrar tocando fuera de la imagen
imgModal.addEventListener('click', (e) => {
  if(e.target === imgModal) closeImg();
});

// Cerrar con ESC
document.addEventListener('keydown', (e) => {
  if(e.key === 'Escape' && imgModal.classList.contains('open')) closeImg();
});
  
  // Scroll reveal
  const els = document.querySelectorAll('.reveal');
  const obs = new IntersectionObserver(entries => {
    entries.forEach((e, i) => {
      if (e.isIntersecting) {
        setTimeout(() => e.target.classList.add('visible'), i * 80);
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.1 });
  els.forEach(el => obs.observe(el));

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', e => {
      e.preventDefault();
      document.querySelector(a.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
    });
  });

  function esc(s){ return (s ?? '').toString().replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c])); }
  function money(n){ return `RD$${Number(n).toLocaleString('en-US')}`; }

  async function load(){
    const res = await fetch('/menu/menu.json', { cache: 'no-store' });
    const data = await res.json();

    document.getElementById('docTitle').textContent = `${data.restaurant} ‚Äì Men√∫`;
    document.getElementById('heroTitle').innerHTML = `${esc(data.restaurant.split(' ')[0] || data.restaurant)} <span>${esc(data.restaurant.split(' ').slice(1).join(' ') || '')}</span>`;
    document.getElementById('heroSubtitle').textContent = data.hero?.subtitle || '';
    document.getElementById('heroTagline').textContent = data.tagline || '';

    // tabs
    const tabs = document.getElementById('heroTabs');
    tabs.innerHTML = '';
    (data.hero?.tabs || []).forEach(t => {
      const a = document.createElement('a');
      a.className = 'nav-tab';
      a.href = t.href;
      a.textContent = t.label;
      tabs.appendChild(a);
    });

    // breakfast
    document.getElementById('breakfastLabel').textContent = data.breakfast?.label || '';
    document.getElementById('breakfastTitle').innerHTML = (data.breakfast?.title || '').replace('Desayuno', '<span>Desayuno</span>').replace('Econ√≥mico','<br>Econ√≥mico');
    document.getElementById('breakfastBadge').textContent = data.breakfast?.badge || '';
    const bg = document.getElementById('breakfastGrid');
    bg.innerHTML = '';
    (data.breakfast?.items || []).forEach(it => {
      const card = document.createElement('div');
      card.className = 'breakfast-card';
      card.innerHTML = `
        <h3>${esc(it.name)}</h3>
        <p class="includes">${esc(it.includes || '')}</p>
        <span class="price-tag">${money(it.price)}</span>
      `;
      bg.appendChild(card);
      if(it.image){
      card.style.cursor = 'pointer';
      card.addEventListener('click', () => openImg(it.image));
      }
    });

    // appetizers
    document.getElementById('appsLabel').textContent = data.appetizers?.label || '';
    document.getElementById('appsTitle').textContent = data.appetizers?.title || 'Entradas';
    const cats = document.getElementById('appsCats');
    cats.innerHTML = '';
    (data.appetizers?.categories || []).forEach(cat => {
      const block = document.createElement('div');
      block.className = 'category-block';
      block.innerHTML = `<p class="category-label">${esc(cat.label)}</p><div class="menu-items"></div>`;
      const items = block.querySelector('.menu-items');
      (cat.items || []).forEach(it => {
        const row = document.createElement('div');
        row.className = 'menu-item';
        row.innerHTML = `<div><span class="item-name">${esc(it.name)}</span>${it.sub ? `<span class="item-sub">${esc(it.sub)}</span>` : ''}</div>
                         <span class="item-price">${money(it.price)}</span>`;
        if(it.image){
        row.style.cursor = 'pointer';
        row.addEventListener('click', () => openImg(it.image));
        }
        items.appendChild(row);
      });
      cats.appendChild(block);
    });

    // mains
    document.getElementById('mainsLabel').textContent = data.mains?.label || '';
    document.getElementById('mainsTitle').innerHTML = `Platos <span>Fuertes</span>`;
    document.getElementById('mainsBadge').textContent = data.tax_note || '';
    const mg = document.getElementById('mainsGrid');
    mg.innerHTML = '';
    (data.mains?.cards || []).forEach(c => {
      const sides = c.sides || data.mains?.sides_default || '';
      const card = document.createElement('div');
      card.className = 'main-card';
      card.innerHTML = `
        <h3>${esc(c.name)}</h3>
        <p class="sides">${esc(sides)}</p>
        <span class="price-tag">${money(c.price)}</span>
      `;
      if(c.image){
  card.style.cursor = 'pointer';
  card.addEventListener('click', () => openImg(c.image));
}
      mg.appendChild(card);
    });

    // drinks
document.getElementById('drinksLabel').textContent = data.drinks?.label || '';
document.getElementById('drinksTitle').innerHTML = `Nuestra <span>Barra</span>`;
document.getElementById('drinksBadge').textContent = data.tax_note || '';
const dg = document.getElementById('drinksGrid');
dg.innerHTML = '';

(data.drinks?.columns || []).forEach(col => {
  const div = document.createElement('div');
  div.className = 'drinks-col';
  div.innerHTML = `<p class="drinks-col-title">${esc(col.title)}</p>`;

  (col.items || []).forEach(it => {
    const row = document.createElement('div');
    row.className = 'drink-item';
    row.innerHTML = `
      <span class="drink-name">${esc(it.name)}</span>
      <span class="drink-price">${esc(it.price)}</span>
    `;

    // ‚úÖ imagen opcional
    if (it.image) {
      row.style.cursor = 'pointer';
      row.addEventListener('click', () => openImg(it.image));
    }

    div.appendChild(row);
  });

  dg.appendChild(div);
});
    // footer
    document.getElementById('footName').textContent = data.restaurant || '';
    document.getElementById('footCopy').textContent = data.footer?.copyright || '';
  }

  load().catch(err => console.error(err));
</script>

<script>
  const params = new URLSearchParams(window.location.search);
  let key = params.get("demo");

  // üîê clave activa actual
  const activeKey = "demo733";

  // üîÅ Si no hay demo key, la agrega autom√°ticamente
  if (!key) {
    window.location.href = "/menu/?demo=" + activeKey;
  }

  // üö´ Si la key no es v√°lida, bloquear
  if (key && key !== activeKey) {
    document.body.innerHTML = `
      <div style="
        display:flex;
        height:100vh;
        align-items:center;
        justify-content:center;
        font-family:sans-serif;
        text-align:center;
        padding:20px;
      ">
        <div>
          <h1>Demo expirado</h1>
          <p>Este acceso ya no est√° disponible.</p>
          <p>Cont√°ctanos para activarlo.</p>
          <p>829-871-0416.</p>
        </div>
      </div>
    `;
  }
</script>
</body>
</html>
